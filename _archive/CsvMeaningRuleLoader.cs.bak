// 归档 CsvMeaningRuleLoader.cs
using System.Collections.Generic;
using System.IO;
using ImporterApp.Models;

namespace ImporterApp.Infrastructure
{
    public static class CsvMeaningRuleLoader
    {
        public static List<AttributeMeaningRule> LoadMeaningRulesFromCsv(string csvPath)
        {
            var rules = new List<AttributeMeaningRule>();
            using (var reader = new StreamReader(csvPath))
            {
                string header = reader.ReadLine(); // skip header
                while (!reader.EndOfStream)
                {
                    var line = reader.ReadLine();
                    if (string.IsNullOrWhiteSpace(line)) continue;
                    var cols = line.Split(',');
                    if (cols.Length < 3) continue;
                    rules.Add(new AttributeMeaningRule
                    {
                        AttributeId = cols[0],
                        Usage = cols[1],
                        MappedAttributeId = cols[2]
                    });
                }
            }
            return rules;
        }
    }
}
